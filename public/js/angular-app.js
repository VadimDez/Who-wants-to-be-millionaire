'use strict';// Source: public/js/app.min.js
/*! 1mil 2014-12-25 */
angular.module("AddController",["QuestionService"]).controller("AddCtrl",["$scope","Question",function($scope,Question){$scope.correctAnswer="A",$scope.added=!1,$scope.add=function(){Question.create({question:$scope.question,answerA:$scope.answerA,answerB:$scope.answerB,answerC:$scope.answerC,answerD:$scope.answerD,correctAnswer:$scope.correctAnswer}).success(function(){$scope.added=!0})},$scope.addMore=function(){$scope.added=!1,$scope.question=$scope.answerA=$scope.answerB=$scope.answerC=$scope.answerD="",$scope.correctAnswer="A"}}]),angular.module("AudioController",["ngAudio"]).controller("AudioCtrl",["$scope","ngAudio",function($scope,ngAudio){$scope.turned=!1,$scope.music=ngAudio.load("/audio/background.mp3"),$scope.music.volume=.5,$scope.music.loop=!0,$scope.turnOff=function(){$scope.music.pause(),$scope.turned=!1},$scope.turnOn=function(){$scope.music.play(),$scope.turned=!0}}]),angular.module("EndGameController",["ui.bootstrap"]).controller("EndGameCtrl",["$scope","$modalInstance","won",function($scope,$modalInstance,won){$scope.won=won,$scope.ok=function(){$modalInstance.close()},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]),angular.module("IndexController",["PlayerFilter","QuestionService","ui.bootstrap","ngAudio"]).controller("IndexCtrl",["$scope","NameFilter","Question","$modal","ngAudio",function($scope,NameFilter,Question,$modal,ngAudio){function game(){nextQuestionSound.currentTime>0&&(nextQuestionSound.currentTime=0),nextQuestionSound.play(),question=questions[$scope.level],$scope.question={question:question.question,answerA:question.answerA,answerB:question.answerB,answerC:question.answerC,answerD:question.answerD}}function launchModal(won){sound.play();var modalInstance=$modal.open({templateUrl:won?"/views/modal_won.html":"/views/modal_lost.html",controller:"EndGameCtrl",size:"sm",resolve:{won:function(){return won}}});modalInstance.result.then(function(){},function(){})}$scope.playerName="",$scope.hideNewGame=!1,$scope.level=0;var question=null,questions=null,available=!1,nextQuestionSound=ngAudio.load("/audio/Page_Turn.wav"),sound=ngAudio.load("/audio/Blop.wav");nextQuestionSound.volume=.5,Question.get16().success(function(_questions){16===_questions.length&&(available=!0),questions=_questions}),$scope.newGame=function(){NameFilter($scope.playerName)&&available&&($scope.hideNewGame=!0,game())},$scope.answer=function(Letter){return available&&question&&-1==$.inArray(Letter,["A","B","C","D"])?!1:void(Letter==window.atob(question.correctAnswer)?($scope.level++,$scope.level>=16?launchModal(!0):game()):(launchModal(!1),$scope.level=0,$scope.hideNewGame=!1))}}]),angular.module("LeaderBoardController",[]).controller("LeaderBoardCtrl",["$scope",function(){}]),angular.module("PlayerFilter",[]).filter("Name",function(){return function(string){return string?(string=string.trim(),0!==string.length&&""!==string):!1}}),angular.module("QuestionService",[]).factory("Question",["$http",function($http){return{create:function(questionData){return $http.post("/api/question",questionData)},get16:function(){return $http.get("/api/question/get16")}}}]),angular.module("Directives",[]).directive("openModal",function(){return{link:function(scope,element){function openModal(){var $element=angular.element("#myModal");$element.modal("show")}element.bind("click",openModal)}}});